---
layout: post
title: 产品中的一些问题记录
---
CMP
---

* 单体式架构向分布式架构迁移

  * 解决性能问题。集群规模扩大后资源同步、资源创建、监控采集问题明显。使用分布式架构，分区治理。
  * 解决稳定性问题。单体式架构，某个节点异常会导致服务不可用。
  * 解决耦合度问题。团队规模扩大，系统拆分为多个相互独立的子模块，独立演进。


* 数据一致性问题

  * 定时同步和消息通知机制结合，保证CMP中的数据和底层资源池中一致。
  * 减少不必要的数据存储，CMP中的数据只保存一份，其它模块使用接口获取数据。减少不同层级之间的数据同步。

ECP
---

* 微服务划分问题

  * 模块划分太细，微服务模块太多，问题分析定位困难。合并一些只有资源CRUD操作的模块，避免过度设计。

* 功能重复问题

  * 自研的存储模块和kubernetes功能高度重复。设计时应该充分调研社区功能开发进展，即使短时间内不能支持，也要考虑如何使后期的迁移工作尽量简单。

* 监控方案问题

  